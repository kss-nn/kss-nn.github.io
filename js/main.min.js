var App=App||{};function initWebAudio(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,App.audioContext=new AudioContext}catch(t){alert("Web Audio API is not supported in this browser")}}function playNote(){App.oscNode=App.audioContext.createOscillator(),App.gainNode=App.audioContext.createGain(),App.gainNode.gain.value=.8,App.oscNode.type="sine",App.oscNode.frequency.value=App.score[App.currentNote].freq,App.oscNode.connect(App.gainNode),App.gainNode.connect(App.audioContext.destination);var t=App.audioContext.currentTime;App.oscNode.start(t),setTimeout(function(){App.gainNode.gain.value=0,App.currentNote=(App.currentNote+1)%20},App.score[App.currentNote].duration)}function changeInstruction(){10===App.clickCount&&($("#instruction-text").addClass("animated hinge"),setTimeout(function(){$("#instruction-text").text("Most nyomj az ajándékokra gyorsan egymás után..."),$("#instruction-text").removeClass(),$("#instruction-text").addClass("animated bounceInDown")},200),loadImages(5)),15===App.clickCount&&($("#instruction-text").addClass("animated rollOut"),setTimeout(function(){$("#instruction-text").text("Boldog szülinapot, Anya!"),$("#instruction-text").removeClass(),$("#instruction-text").addClass("animated bounceInDown")},200))}function loadImages(t){var n=getRandomImages(t);$("#image_1").attr("src",n[0]),$("#image_2").attr("src",n[1]),$("#image_3").attr("src",n[2]),$("#image_4").attr("src",n[3]),$("#image_5").attr("src",n[4]),showImages(t)}function showImages(t){App.remainImageCount=t;for(var n=window.innerHeight,e=1;e<=t;e++)!function(t){var e=Math.floor(500*Math.random()+200),o=Math.floor(6*Math.random()+6);$("#image_"+t).velocity({translateY:n-300},{duration:2e3,easing:[e,o]})}(e)}function imageOut(t){App.remainImageCount--,$("#"+t).velocity({translateY:-200}),0===App.remainImageCount&&loadImages(5)}function getRandomImages(t){for(var n,e={},o=[];o.length<t;)e[n=Math.floor(11*Math.random()+1)]||(e[n]=!0,o.push("images/"+n+".png"));return o}App.remainImageCount=0,App.clickCount=0,App.currentNote=0,App.audioContext=null,App.oscNode=null,App.score=[{freq:130.81,duration:300},{freq:146.83,duration:300},{freq:130.81,duration:300},{freq:174.61,duration:300},{freq:164.81,duration:600},{freq:130.81,duration:300},{freq:146.83,duration:300},{freq:130.81,duration:300},{freq:196,duration:300},{freq:174.61,duration:600},{freq:130.81,duration:300},{freq:261.63,duration:300},{freq:220,duration:300},{freq:174.61,duration:300},{freq:146.83,duration:600},{freq:233.08,duration:300},{freq:220,duration:300},{freq:174.61,duration:300},{freq:196,duration:300},{freq:174.61,duration:600}],$(document).ready(function(){initWebAudio(),$("body").height(window.innerHeight),$(".image").click(function(t){playNote(),imageOut($(this).attr("id"))}),$("body").click(function(t){App.clickCount++,changeInstruction()}),$("body")[0].addEventListener("touchend",function(t){"BODY"===t.target.tagName&&(App.clickCount++,changeInstruction())},!1),$("#instruction-text").addClass("animated rubberBand")});