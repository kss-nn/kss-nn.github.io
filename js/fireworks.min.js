var Fireworks=function(){var t=[],i=null,o=null,a=null,s=null,e=0,r=0;function h(){(App.clickCount<10||Math.floor(10*Math.random()>7))&&l()}function n(){o.fillStyle="rgba(0,0,0,0.2)",o.fillRect(0,0,e,r),requestAnimFrame(n),function(){var i=t.length;for(;i--;){var s=t[i];s.update()&&(t.splice(i,1),s.usePhysics||(Math.random()<.8?FireworkExplosions.star(s):FireworkExplosions.circle(s))),s.render(o,a)}}()}function l(i,o,a,s,h){i=i||{},o=o||{},a=a||{},t.push(new Particle({x:i.x||.5*e,y:i.y||r+10},{y:o.y||150+100*Math.random()},{x:a.x||3*Math.random()-1.5,y:a.y||0},s||12*Math.floor(100*Math.random()),h))}return{initialize:function(){e=window.innerWidth,r=window.innerHeight,i=document.createElement("canvas"),o=i.getContext("2d"),a=document.createElement("canvas"),s=a.getContext("2d"),function(t){var i=10*t;a.width=i,a.height=i,s.globalCompositeOperation="source-over";for(var o=0;o<100;o++){var e=o*t,r=e%i,h=Math.floor(e/i)*t;s.fillStyle="hsl("+Math.round(3.6*o)+",100%,60%)",s.fillRect(r,h,t,t),s.drawImage(Library.bigGlow,r,h)}}(12),i.width=e,i.height=r,document.body.appendChild(i),document.addEventListener("mouseup",h,!0),document.addEventListener("touchend",h,!0),n()},createParticle:l}}(),Particle=function(t,i,o,a,s){this.GRAVITY=.06,this.alpha=1,this.easing=.02*Math.random(),this.fade=.1*Math.random(),this.gridX=a%120,this.gridY=12*Math.floor(a/120),this.color=a,this.pos={x:t.x||0,y:t.y||0},this.vel={x:o.x||0,y:o.y||0},this.lastPos={x:this.pos.x,y:this.pos.y},this.target={y:i.y||0},this.usePhysics=s||!1};Particle.prototype={update:function(){if(this.lastPos.x=this.pos.x,this.lastPos.y=this.pos.y,this.usePhysics)this.vel.y+=this.GRAVITY,this.pos.y+=this.vel.y,this.alpha-=this.fade;else{var t=this.target.y-this.pos.y;this.pos.y+=t*(.03+this.easing),this.alpha=Math.min(t*t*5e-5,1)}return this.pos.x+=this.vel.x,this.alpha<.005},render:function(t,i){var o=Math.round(this.pos.x),a=Math.round(this.pos.y),s=-5*(o-this.lastPos.x),e=-5*(a-this.lastPos.y);t.save(),t.globalCompositeOperation="lighter",t.globalAlpha=Math.random()*this.alpha,t.fillStyle="rgba(255,255,255,0.3)",t.beginPath(),t.moveTo(this.pos.x,this.pos.y),t.lineTo(this.pos.x+1.5,this.pos.y),t.lineTo(this.pos.x+s,this.pos.y+e),t.lineTo(this.pos.x-1.5,this.pos.y),t.closePath(),t.fill(),t.drawImage(i,this.gridX,this.gridY,12,12,o-6,a-6,12,12),t.drawImage(Library.smallGlow,o-3,a-3),t.restore()}};var Library={bigGlow:document.getElementById("big-glow"),smallGlow:document.getElementById("small-glow")},FireworkExplosions={circle:function(t){for(var i=100,o=2*Math.PI/i;i--;){var a=4+4*Math.random(),s=i*o;Fireworks.createParticle(t.pos,null,{x:Math.cos(s)*a,y:Math.sin(s)*a},t.color,!0)}},star:function(t){var i=6+Math.round(15*Math.random()),o=3+Math.round(7*Math.random()),a=-(3*Math.random()-6),s=0,e=0,r=2*Math.PI,h=Math.random()*r;do{s=e,e=(e+o)%i;for(var n=s/i*r-h,l=(s+o)/i*r-h,d={x:t.pos.x+80*Math.cos(n),y:t.pos.y+80*Math.sin(n)},c={x:t.pos.x+80*Math.cos(l),y:t.pos.y+80*Math.sin(l)},y={x:c.x-d.x,y:c.y-d.y,a:l-n},p=0;p<10;p++){var u=p/10,m=n+u*y.a;Fireworks.createParticle({x:d.x+u*y.x,y:d.y+u*y.y},null,{x:Math.cos(m)*a,y:Math.sin(m)*a},t.color,!0)}}while(0!==e)}};window.onload=function(){Fireworks.initialize()};